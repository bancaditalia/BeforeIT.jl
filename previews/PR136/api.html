<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · BeforeIT.jl</title><meta name="title" content="API · BeforeIT.jl"/><meta property="og:title" content="API · BeforeIT.jl"/><meta property="twitter:title" content="API · BeforeIT.jl"/><meta name="description" content="Documentation for BeforeIT.jl."/><meta property="og:description" content="Documentation for BeforeIT.jl."/><meta property="twitter:description" content="Documentation for BeforeIT.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.png" alt="BeforeIT.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">BeforeIT.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><a class="tocitem" href="examples/basic_example.html">Basics</a></li><li><a class="tocitem" href="examples/scenario_analysis_via_shock.html">Shocked simulations</a></li><li><a class="tocitem" href="examples/basic_inheritance.html">Extending the model</a></li><li><a class="tocitem" href="examples/single_agents.html">Working with Single Agents</a></li><li><a class="tocitem" href="examples/multithreading_speedup.html">Multithreading within the model</a></li><li><a class="tocitem" href="examples/prediction_pipeline.html">Calibration</a></li><li class="is-active"><a class="tocitem" href="api.html">API</a><ul class="internal"><li><a class="tocitem" href="#Agent-types"><span>Agent types</span></a></li><li><a class="tocitem" href="#Initialisation-function"><span>Initialisation function</span></a></li><li><a class="tocitem" href="#Functions-to-run-an-entire-simulation"><span>Functions to run an entire simulation</span></a></li><li><a class="tocitem" href="#Firms-actions"><span>Firms actions</span></a></li><li><a class="tocitem" href="#Households-actions"><span>Households actions</span></a></li><li><a class="tocitem" href="#Government-actions"><span>Government actions</span></a></li><li><a class="tocitem" href="#Bank-and-Central-Bank-actions"><span>Bank and Central Bank actions</span></a></li><li><a class="tocitem" href="#Rest-Of-The-World-actions"><span>Rest Of The World actions</span></a></li><li><a class="tocitem" href="#Markets"><span>Markets</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="api.html">API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="api.html">API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/bancaditalia/BeforeIT.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/bancaditalia/BeforeIT.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><ul><li><a href="api.html#Code-reference">Code reference</a></li><li class="no-marker"><ul><li><a href="api.html#Agent-types">Agent types</a></li><li><a href="api.html#Initialisation-function">Initialisation function</a></li><li><a href="api.html#Functions-to-run-an-entire-simulation">Functions to run an entire simulation</a></li><li><a href="api.html#Firms-actions">Firms actions</a></li><li><a href="api.html#Households-actions">Households actions</a></li><li><a href="api.html#Government-actions">Government actions</a></li><li><a href="api.html#Bank-and-Central-Bank-actions">Bank and Central Bank actions</a></li><li><a href="api.html#Rest-Of-The-World-actions">Rest Of The World actions</a></li><li><a href="api.html#Markets">Markets</a></li></ul></li></ul><h1 id="Code-reference"><a class="docs-heading-anchor" href="#Code-reference">Code reference</a><a id="Code-reference-1"></a><a class="docs-heading-anchor-permalink" href="#Code-reference" title="Permalink"></a></h1><p>In this page we document the functions which constitute the bulk of BeforeIT.jl functionality.</p><h2 id="Agent-types"><a class="docs-heading-anchor" href="#Agent-types">Agent types</a><a id="Agent-types-1"></a><a class="docs-heading-anchor-permalink" href="#Agent-types" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="BeforeIT.@object-Tuple{Any}"><a class="docstring-binding" href="#BeforeIT.@object-Tuple{Any}"><code>BeforeIT.@object</code></a> — <span class="docstring-category">Macro</span></summary><section><div><pre><code class="language-julia hljs">Bit.@object struct YourObjectType{X}(ObjectTypeToInherit) [&lt;: OptionalSupertype]
    extra_property::X
    other_extra_property_with_default::Bool = true
    const other_extra_const_property::Int
    # etc...
end</code></pre><p>Define an object struct which includes all fields that <code>YourObjectType</code> has, as well as any additional ones the user may provide. The macro supports all syntaxes that the standard Julia struct command allows for, such as <code>const</code> field declaration or default values for some fields. Additionally, the resulting type will always have a keyword constructor defined for it (using <code>@kwdef</code>).</p><p>Using <code>Bit.@object</code> is the recommended way to create types for BeforeIT.jl.</p><p>Structs created with <code>Bit.@object</code> by default subtype <code>Bit.AbstractObject</code>. If you want <code>YourObjectType</code> to subtype something other than <code>Bit.AbstractObject</code>, use the optional argument <code>OptionalSupertype</code>.</p><p><strong>Usage</strong></p><p>The macro <code>Bit.@object</code> has two primary uses:</p><ol><li>To include the mandatory fields for a particular object in your object struct. In this case you would use one of the minimal object types.</li><li>A convenient way to include fields from another, already existing struct, thereby establishing a toolkit for &quot;type inheritance&quot; in Julia.</li></ol><p>The existing minimal object types are:</p><ul><li><code>Bit.Workers</code></li><li><code>Bit.Firms</code></li><li><code>Bit.Bank</code></li><li><code>Bit.CentralBank</code></li><li><code>Bit.Government</code></li><li><code>Bit.RestOfTheWorld</code></li><li><code>Bit.Aggregates</code></li><li><code>Bit.Data</code></li></ul><p>which describe which fields they will contribute to the new type.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs"># you can either constrain the type (to Float64 in this case) at definition time
Bit.@object mutable struct CentralBankNew(CentralBank) &lt;: Bit.AbstractCentralBank
    new_field::Float64
end
# or keep it generic so that you can change it at construction time
Bit.@object mutable struct CentralBankNew2{T}(CentralBank) &lt;: Bit.AbstractCentralBank
    new_field::T
end</code></pre><p>Consult the CANVAS Extension page in the documentation for a more advanced example on how to use the macro.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/model_init/object_macro.jl#L7-L64">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.Aggregates"><a class="docstring-binding" href="#BeforeIT.Aggregates"><code>BeforeIT.Aggregates</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>This is a Aggregates type. It is used to store the aggregate variables of the economy. Note that <code>t</code> is an integer, while the rest are floats or vectors of floats.</p><p><strong>Fields</strong></p><ul><li><code>Y [vector]</code>: GDP data + predictions</li><li><code>pi_ [vector]</code>: inflation data + predictions</li><li><code>P_bar</code>: Global price index</li><li><code>P_bar_g [vector]</code>: Producer price index for principal good g</li><li><code>P_bar_HH</code>: Consumer price index</li><li><code>P_bar_CF</code>: Capital price index</li><li><code>P_bar_h</code>: CPI_h</li><li><code>P_bar_CF_h</code>: Capital price index _h</li><li><code>Y_e</code>: Expected GDP</li><li><code>gamma_e</code>: Expected growth</li><li><code>pi_e</code>: Expected inflation</li><li><code>t</code>: Time index</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/model_init/agents.jl#L295-L312">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.Bank"><a class="docstring-binding" href="#BeforeIT.Bank"><code>BeforeIT.Bank</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>This is a Bank type. It represents the bank of the model.</p><p><strong>Fields</strong></p><ul><li><code>E_k</code>: equity capital (common equity) of the bank</li><li><code>Pi_k</code>: Profits of the bank</li><li><code>Pi_e_k</code>: Expected profits of the bank</li><li><code>D_k</code>: Residual and balancing item on the bank’s balance sheet</li><li><code>r</code>: Rate for loans and morgages</li></ul><p><strong>Household fields (bank&#39; owner)</strong></p><ul><li><code>Y_h</code>: Net disposable income of bank owner (investor)</li><li><code>C_d_h</code>: Consumption budget</li><li><code>I_d_h</code>: Investment budget</li><li><code>C_h</code>: Realised consumption</li><li><code>I_h</code>: Realised investment</li><li><code>K_h</code>: Capital stock</li><li><code>D_h</code>: Deposits</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/model_init/agents.jl#L150-L167">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.CentralBank"><a class="docstring-binding" href="#BeforeIT.CentralBank"><code>BeforeIT.CentralBank</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>This is a CentralBank type. It represents the central bank of the model.</p><p><strong>Fields</strong></p><ul><li><code>r_bar</code>: Nominal interest rate</li><li><code>r_G</code>: Interest rate on government bonds</li><li><code>rho</code>: Parameter for gradual adjustment of the policy rate</li><li><code>r_star</code>: Real equilibrium interest rate</li><li><code>pi_star</code>: Inflation target by CB</li><li><code>xi_pi</code>: Weight the CB puts on inflation targeting</li><li><code>xi_gamma</code>: Weight placed on economic</li><li><code>E_CB</code>: Central bank equity</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/model_init/agents.jl#L183-L195">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.Firms"><a class="docstring-binding" href="#BeforeIT.Firms"><code>BeforeIT.Firms</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>This is a Firms type. Each field is an array which stores the values for all the firms in the economy. Note that the <code>G_i</code>, <code>N_i</code> and <code>V_i</code> fields are integers, while the rest are floats.</p><p>For all fields the entry at index <code>i</code> corresponds to the <code>i</code>th firm.</p><p><strong>Fields</strong></p><ul><li><code>G_i</code>: Principal product</li><li><code>alpha_bar_i</code>: Average productivity of labor</li><li><code>beta_i</code>: Productivity of intermediate consumption</li><li><code>kappa_i</code>: Productivity of capital</li><li><code>w_i</code>: Wages</li><li><code>w_bar_i</code>: Average wage rate</li><li><code>delta_i</code>: Depreciation rate for capital</li><li><code>tau_Y_i</code>: Net tax rate on products</li><li><code>tau_K_i</code>: Net tax rate on production</li><li><code>N_i</code>: Number of persons employed</li><li><code>Y_i</code>: Production of goods</li><li><code>Q_i</code>: Sales of goods</li><li><code>Q_d_i</code>: Demand for goods</li><li><code>P_i</code>: Price</li><li><code>S_i</code>: Inventories</li><li><code>K_i</code>: Capital, in real terms</li><li><code>M_i</code>: Intermediate goods/services and raw materials, in real terms</li><li><code>L_i</code>: Outstanding loans</li><li><code>pi_bar_i</code>: Operating margin</li><li><code>D_i</code>: Deposits of the firm</li><li><code>Pi_i</code>: Profits</li><li><code>V_i</code>: Vacancies</li><li><code>I_i</code>: Investments</li><li><code>E_i</code>: Equity</li><li><code>P_bar_i</code>: Price index</li><li><code>P_CF_i</code>: Price index</li><li><code>DS_i</code>: Differnece in stock of final goods</li><li><code>DM_i</code>: Difference in stock of intermediate goods</li><li><code>DL_i</code>: Obtained loans</li><li><code>DL_d_i</code>: Target loans</li><li><code>K_e_i</code>: Expected capital </li><li><code>L_e_i</code>: Expected loans</li><li><code>Q_s_i</code>: Expected sales</li><li><code>I_d_i</code>: Desired investments</li><li><code>DM_d_i</code>: Desired materials</li><li><code>N_d_i</code>: Desired employment</li><li><code>Pi_e_i</code>: Expected profits</li></ul><p><strong>Household fields (firms&#39; owners)</strong></p><ul><li><code>Y_h</code>: Net disposable income of firm owner (investor)</li><li><code>C_d_h</code>: Consumption budget</li><li><code>I_d_h</code>: Investment budget</li><li><code>C_h</code>: Realised consumption</li><li><code>I_h</code>: Realised investment</li><li><code>K_h</code>: Capital stock</li><li><code>D_h</code>: Deposits of the owner of the firms</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/model_init/agents.jl#L45-L97">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.Government"><a class="docstring-binding" href="#BeforeIT.Government"><code>BeforeIT.Government</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>This is a Government type. It represents the government of the model.</p><p><strong>Fields</strong></p><ul><li><code>alpha_G</code>: Autoregressive coefficient for government consumption</li><li><code>beta_G</code>: Scalar constant for government consumption</li><li><code>sigma_G</code>: Variance coefficient for government consumption</li><li><code>Y_G</code>: Government revenues</li><li><code>C_G</code>: Consumption demand of the general government</li><li><code>L_G</code>: Loans taken out by the government</li><li><code>sb_inact</code>: Social benefits for inactive persons</li><li><code>sb_other</code>: Social benefits for all</li><li><code>C_d_j [vector]</code>: Local governments consumption demand</li><li><code>C_j</code>: Realised government consumption</li><li><code>P_j</code>: Price inflation of government goods &lt;- ??</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/model_init/agents.jl#L207-L222">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.Model"><a class="docstring-binding" href="#BeforeIT.Model"><code>BeforeIT.Model</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>This is a Model type. It is used to store all the agents of the economy.</p><p><strong>Fields</strong></p><ul><li><code>w_act</code>: Workers that are active</li><li><code>w_inact</code>: Workers that are inactive</li><li><code>firms</code>: Firms</li><li><code>bank</code>: Bank</li><li><code>cb</code>: CentralBank</li><li><code>gov</code>: Government</li><li><code>rotw</code>: RestOfTheWorld</li><li><code>agg</code>: Aggregates</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/model_init/agents.jl#L331-L343">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.RestOfTheWorld"><a class="docstring-binding" href="#BeforeIT.RestOfTheWorld"><code>BeforeIT.RestOfTheWorld</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>This is a RestOfTheWorld type. It represents the rest of the world of the model.</p><p><strong>Fields</strong></p><ul><li><code>alpha_E</code>: Autoregressive coefficient for exports</li><li><code>beta_E</code>: Scalar constant for exports</li><li><code>sigma_E</code>: Variance coefficient for exports</li><li><code>alpha_I</code>: Autoregressive coefficient for imports</li><li><code>beta_I</code>: Scalar constant for imports</li><li><code>sigma_I</code>: Variance coefficient for imports</li><li><code>Y_EA</code>: GDP euro area</li><li><code>gamma_EA</code>: Growth euro area</li><li><code>pi_EA</code>: Inflation euro area</li><li><code>alpha_pi_EA</code>: Autoregressive coefficient for euro area inflation</li><li><code>beta_pi_EA</code>: Autoregressive coefficient for euro area inflation Scalar constant for euro area inflation</li><li><code>sigma_pi_EA</code>: Variance coefficient for euro area inflation</li><li><code>alpha_Y_EA</code>: Autoregressive coefficient for euro area GDP</li><li><code>beta_Y_EA</code>: Autoregressive coefficient for euro area GDP Scalar constant for euro area GDP</li><li><code>sigma_Y_EA</code>: Variance coefficient for euro area GDP</li><li><code>D_RoW</code>: Net creditor/debtor position of the national economy to the rest of the world</li><li><code>Y_I</code>: Supply of imports (in real terms)</li><li><code>C_E</code>: Total demand for exports</li><li><code>C_d_l [vector]</code>: Demand for exports of specific product</li><li><code>C_l</code>: Realised consumption by foreign consumers</li><li><code>Y_m [vector]</code>: Supply of imports per sector</li><li><code>Q_m [vector]</code>: Sales for imports per sector</li><li><code>Q_d_m [vector]</code>: Demand for goods</li><li><code>P_m [vector]</code>: Price of imports per sector</li><li><code>P_l</code>: Price inflation of exports &lt;- ??</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/model_init/agents.jl#L237-L266">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.Workers"><a class="docstring-binding" href="#BeforeIT.Workers"><code>BeforeIT.Workers</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>This is a Workers. Each field is an array which stores the values for all the workers in the economy. Note that the <code>O_h</code> field is an integer, while the rest are floats.</p><p>For all fields the entry at index <code>i</code> corresponds to the <code>i</code>th worker.</p><p><strong>Fields</strong></p><ul><li><code>Y_h</code>: Net disposable income of worker owner (investor)</li><li><code>D_h</code>: Deposits</li><li><code>K_h</code>: Capital stock</li><li><code>w_h</code>: Wages (0 if inactive or unemployed)</li><li><code>O_h</code>: Occupation (0 if unemployed, -1 if inactive)</li><li><code>C_d_h</code>: Consumption budget</li><li><code>I_d_h</code>: Investment budget</li><li><code>C_h</code>: Realised consumption</li><li><code>I_h</code>: Realised investment</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/model_init/agents.jl#L12-L28">source</a></section></details></article><h2 id="Initialisation-function"><a class="docs-heading-anchor" href="#Initialisation-function">Initialisation function</a><a id="Initialisation-function-1"></a><a class="docs-heading-anchor-permalink" href="#Initialisation-function" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="BeforeIT.Model-Tuple{Dict{String, Any}, Dict{String, Any}}"><a class="docstring-binding" href="#BeforeIT.Model-Tuple{Dict{String, Any}, Dict{String, Any}}"><code>BeforeIT.Model</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Model(parameters, initial_conditions)</code></pre><p>Initializes the model with given parameters and initial conditions.</p><p>Parameters:</p><ul><li><code>parameters</code>: A dictionary containing the model parameters.</li><li>initial_conditions: A dictionary containing the initial conditions.</li></ul><p>Returns:</p><ul><li>model::AbstractModel: The initialized model.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/model_init/init.jl#L1-L12">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.update_variables_with_totals!-Tuple{BeforeIT.AbstractModel}"><a class="docstring-binding" href="#BeforeIT.update_variables_with_totals!-Tuple{BeforeIT.AbstractModel}"><code>BeforeIT.update_variables_with_totals!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">update_variables_with_totals!(model::AbstractModel)</code></pre><p>Update the variables in the given <code>model</code> with some global quantities obtained from all agents. This is the last step in the initialization process and it must be performed after all agents have been initialized.</p><p><strong>Arguments</strong></p><ul><li><code>model::AbstractModel</code>: The model object to update.</li></ul><p><strong>Returns</strong></p><ul><li>Nothing</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/model_init/init.jl#L45-L56">source</a></section></details></article><h2 id="Functions-to-run-an-entire-simulation"><a class="docs-heading-anchor" href="#Functions-to-run-an-entire-simulation">Functions to run an entire simulation</a><a id="Functions-to-run-an-entire-simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Functions-to-run-an-entire-simulation" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="BeforeIT.ensemblerun!"><a class="docstring-binding" href="#BeforeIT.ensemblerun!"><code>BeforeIT.ensemblerun!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">ensemblerun!(models, T=1; shock! = NoShock(), parallel = true)</code></pre><p>A function that runs the models simulations for <code>T</code> steps on each of them.</p><p><strong>Arguments</strong></p><ul><li><p><code>models</code>: The models to simulate. The models can either be in a <code>Vector</code> or <code>Generator</code>.</p></li><li><p><code>T</code>: the number of steps to perform.</p></li></ul><p><strong>Returns</strong></p><ul><li><code>models</code>: The updated models.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">parameters = Bit.AUSTRIA2010Q1.parameters
initial_conditions = Bit.AUSTRIA2010Q1.initial_conditions
models = (Bit.Model(parameters, initial_conditions) for _ in 1:10)
Bit.ensemblerun!(models, 2)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/one_simulation.jl#L33-L54">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.ensemblerun-Tuple{BeforeIT.AbstractModel, Int64, Int64}"><a class="docstring-binding" href="#BeforeIT.ensemblerun-Tuple{BeforeIT.AbstractModel, Int64, Int64}"><code>BeforeIT.ensemblerun</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">ensemblerun(model, T, n_sims; shock! = NoShock(), parallel = true)</code></pre><p>A function that creates <code>n_sims</code> copies of a model and runs simulations for <code>T</code> steps on each of them.</p><p><strong>Arguments</strong></p><ul><li><code>model::AbstractModel</code>: The base model to be copied.</li><li><code>T</code>: The number of steps to perform on each model.</li><li><code>n_sims</code>: The number of model copies to create and simulate.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>shock</code>: The shock to apply during simulation (default: <code>NoShock()</code>).</li><li><code>parallel</code>: Whether to run simulations in parallel (default: <code>true</code>).</li></ul><p><strong>Returns</strong></p><ul><li><code>models</code>: A vector containing the <code>n_sims</code> updated models after simulation.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">parameters = Bit.AUSTRIA2010Q1.parameters
initial_conditions = Bit.AUSTRIA2010Q1.initial_conditions
model = Bit.Model(parameters, initial_conditions)
models = Bit.ensemblerun(model, 2, 10)  # Create 10 copies and run for 2 steps</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/one_simulation.jl#L76-L100">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.run!"><a class="docstring-binding" href="#BeforeIT.run!"><code>BeforeIT.run!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">run!(model, T; shock! = NoShock(), parallel = false)</code></pre><p>Run a single simulation based on the provided <code>model</code>.  The simulation runs for a number of steps <code>T</code>.</p><p><strong>Arguments</strong></p><ul><li><code>model::AbstractModel</code>: The model configuration used for the simulation.</li><li><code>T</code>: the number of steps to perform.</li></ul><p><strong>Returns</strong></p><ul><li><code>model::AbstractModel</code>: The model updated during the simulation.</li></ul><p><strong>Details</strong></p><p>The function iteratively updates the model and data for each step using <code>Bit.step!(model)</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">parameters = Bit.AUSTRIA2010Q1.parameters
initial_conditions = Bit.AUSTRIA2010Q1.initial_conditions
model = Bit.Model(parameters, initial_conditions)
Bit.run!(model, 2)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/one_simulation.jl#L1-L24">source</a></section></details></article><h2 id="Firms-actions"><a class="docs-heading-anchor" href="#Firms-actions">Firms actions</a><a id="Firms-actions-1"></a><a class="docs-heading-anchor-permalink" href="#Firms-actions" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="BeforeIT.Firms-Tuple{Any, Any}"><a class="docstring-binding" href="#BeforeIT.Firms-Tuple{Any, Any}"><code>BeforeIT.Firms</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Firms(parameters, initial_conditions)</code></pre><p>Initialize firms with given parameters and initial conditions.</p><p><strong>Arguments</strong></p><ul><li><code>parameters</code>: The parameters for initializing the firms.</li><li><code>initial_conditions</code>: The initial conditions for the firms.</li></ul><p><strong>Returns</strong></p><ul><li>firms::Firms: The initialized firms.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/model_init/init_firms.jl#L1-L12">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.firms_deposits-Tuple{Any}"><a class="docstring-binding" href="#BeforeIT.firms_deposits-Tuple{Any}"><code>BeforeIT.firms_deposits</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">firms_deposits(model)</code></pre><p>Calculate the new deposits of firms.</p><p><strong>Returns</strong></p><ul><li><code>DD_i</code>: Vector of new deposits</li></ul><p>The new deposits <code>DD_i</code> are calculated as follows:</p><pre><code class="language-julia hljs">DD_i = sales + labour_cost + material_cost + taxes_products + taxes_production + corporate_tax + dividend_payments + interest_payments + interest_received + investment_cost + new_credit + debt_installment</code></pre><p>where:</p><ul><li><code>sales = P_i * Q_i</code></li><li><code>labour_cost = (1 + tau_SIF) * w_i * N_i * P_bar_HH</code></li><li><code>material_cost = -DM_i * P_bar_i</code></li><li><code>taxes_products = -tau_Y_i * P_i * Y_i</code></li><li><code>taxes_production = -tau_K_i * P_i * Y_i</code></li><li><code>corporate_tax = -tau_FIRM * pos(Pi_i)</code></li><li><code>dividend_payments = -theta_DIV * (1 - tau_FIRM) * pos(Pi_i)</code></li><li><code>interest_payments = -r * (L_i + pos(-D_i))</code></li><li><code>interest_received = r_bar * pos(D_i)</code></li><li><code>investment_cost = -P_CF_i * I_i</code></li><li><code>new_credit = DL_i</code></li><li><code>debt_installment = -theta * L_i</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/firms.jl#L237-L264">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.firms_equity-Tuple{Any}"><a class="docstring-binding" href="#BeforeIT.firms_equity-Tuple{Any}"><code>BeforeIT.firms_equity</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">firms_equity(model)</code></pre><p>Calculate the equity of firms.</p><p><strong>Returns</strong></p><ul><li><code>E_i</code>: Vector of equity</li></ul><p>The equity <code>E_i</code> is calculated as follows:</p><p class="math-container">\[E_i = D_i + M_i * \sum(a_{sg}[:, G_i] * \bar{P}_g) + P_i * S_i + \bar{P}_{CF} * K_i - L_i\]</p><p>where:</p><ul><li><code>D_i</code>: Deposits</li><li><code>M_i</code>: Intermediate goods</li><li><code>a_sg</code>: Technology coefficient of the gth product in the sth industry</li><li><code>G_i</code>: Vector of goods</li><li><code>P_bar_g</code>: Producer price index for principal good g</li><li><code>P_i</code>: Price</li><li><code>S_i</code>: Stock</li><li><code>P_bar_CF</code>: Capital price index</li><li><code>K_i</code>: Capital stock</li><li><code>L_i</code>: Loans</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/firms.jl#L305-L330">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.firms_expectations_and_decisions-Tuple{BeforeIT.AbstractModel}"><a class="docstring-binding" href="#BeforeIT.firms_expectations_and_decisions-Tuple{BeforeIT.AbstractModel}"><code>BeforeIT.firms_expectations_and_decisions</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">firms_expectations_and_decisions(model)</code></pre><p>Calculate the expectations and decisions of firms. That is: compute firm quantity, price, investment and intermediate-goods,  employment decisions, expected profits, and desired/expected loans and capital.</p><p><strong>Returns</strong></p><ul><li><code>Q_s_i</code>: Vector of desired quantities</li><li><code>I_d_i</code>: Vector of desired investments</li><li><code>DM_d_i</code>: Vector of desired intermediate goods</li><li><code>N_d_i</code>: Vector of desired employment</li><li><code>Pi_e_i</code>: Vector of expected profits</li><li><code>DL_d_i</code>: Vector of desired new loans</li><li><code>K_e_i</code>: Vector of expected capital</li><li><code>L_e_i</code>: Vector of expected loans</li><li><code>P_i</code>: Vector of  prices</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/firms.jl#L44-L61">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.firms_loans-Tuple{Any}"><a class="docstring-binding" href="#BeforeIT.firms_loans-Tuple{Any}"><code>BeforeIT.firms_loans</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">firms_loans(model)</code></pre><p>Calculate the new loans of firms.</p><p><strong>Returns</strong></p><ul><li><code>L_i</code>: Vector of new loans</li></ul><p>The new loans <code>L_i</code> are calculated as follows:</p><p class="math-container">\[L_i = (1 - theta) * L_i + DL_i\]</p><p>where:</p><ul><li><code>theta</code>: Rate of repayment</li><li><code>L_i</code>: Loans</li><li><code>DL_i</code>: Acquired new loans</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/firms.jl#L346-L364">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.firms_production-Tuple{BeforeIT.AbstractModel}"><a class="docstring-binding" href="#BeforeIT.firms_production-Tuple{BeforeIT.AbstractModel}"><code>BeforeIT.firms_production</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">firms_production(model)</code></pre><p>Calculate the production of firms.</p><p><strong>Returns</strong></p><ul><li><code>Y_i</code>: Vector of production</li></ul><p>The production <code>Y_i</code> is computed using a Leontief technology.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/firms.jl#L133-L142">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.firms_profits-Tuple{BeforeIT.AbstractModel}"><a class="docstring-binding" href="#BeforeIT.firms_profits-Tuple{BeforeIT.AbstractModel}"><code>BeforeIT.firms_profits</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">firms_profits(model)</code></pre><p>Calculate the profits of firms.</p><p><strong>Returns</strong></p><ul><li><code>Pi_i</code>: Vector of profits</li></ul><p>The profits <code>Pi_i</code> are calculated as follows:</p><pre><code class="language-julia hljs">Pi_i = in_sales + in_deposits - out_wages - out_expenses - out_depreciation - out_taxes_prods - out_taxes_capital - out_loans</code></pre><p>where:</p><ul><li><code>in_sales = P_i * Q_i + P_i * DS_i</code></li><li><code>in_deposits = r_bar * pos(D_i)</code></li><li><code>out_wages = (1 + tau_SIF) * w_i * N_i * P_bar_HH</code></li><li><code>out_expenses = 1 / beta_i * P_bar_i * Y_i</code></li><li><code>out_depreciation = delta_i / kappa_i * P_CF_i * Y_i</code></li><li><code>out_taxes_prods = tau_Y_i * P_i * Y_i</code></li><li><code>out_taxes_capital = tau_K_i * P_i * Y_i</code></li><li><code>out_loans = r * (L_i + pos(-D_i))</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/firms.jl#L189-L212">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.firms_stocks-Tuple{Any}"><a class="docstring-binding" href="#BeforeIT.firms_stocks-Tuple{Any}"><code>BeforeIT.firms_stocks</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">firms_stocks(model)</code></pre><p>Calculate the stocks of firms.</p><p><strong>Returns</strong></p><ul><li><code>K_i</code>: Vector of capital stock</li><li><code>M_i</code>: Vector of intermediate goods</li><li><code>DS_i</code>: Vector of differneces in stock of final goods</li><li><code>S_i</code>: Vector of stock of final goods</li></ul><p>The stocks are calculated as follows:</p><pre><code class="language-julia hljs">K_i = K_i - delta_i / kappa_i * Y_i + I_i
M_i = M_i - Y_i / beta_i + DM_i
DS_i = Y_i - Q_i
S_i = S_i + DS_i</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/firms.jl#L375-L394">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.firms_wages-Tuple{BeforeIT.AbstractModel}"><a class="docstring-binding" href="#BeforeIT.firms_wages-Tuple{BeforeIT.AbstractModel}"><code>BeforeIT.firms_wages</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">firms_wages(model)</code></pre><p>Calculate the wages set by firms.</p><p><strong>Returns</strong></p><ul><li><code>w_i</code>: Vector of wages</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/firms.jl#L107-L114">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.leontief_production-NTuple{7, Any}"><a class="docstring-binding" href="#BeforeIT.leontief_production-NTuple{7, Any}"><code>BeforeIT.leontief_production</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">leontief_production(Q_s_i, N_i, alpha_i, K_i, kappa_i, M_i, beta_i)</code></pre><p>Calculate the production function of firms.</p><p><strong>Arguments</strong></p><ul><li><code>Q_s_i</code>: Vector of desired quantities</li><li><code>N_i</code>: Vector of employment</li><li><code>alpha_i</code>: Vector of labour productivity</li><li><code>K_i</code>: Vector of capital stock</li><li><code>kappa_i</code>: Vector of capital productivity</li><li><code>M_i</code>: Vector of intermediate goods</li><li><code>beta_i</code>: Vector of intermediate goods productivity</li></ul><p><strong>Returns</strong></p><ul><li><code>Y_i</code>: Vector of production</li></ul><p>The Leontief production function <code>Y_i</code> is calculated as follows:</p><p class="math-container">\[Y_i = \min(Q_s_i, \min(N_i \cdot \alpha_i, \min(K_i \cdot \kappa_i, M_i \cdot \beta_i)))\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/firms.jl#L160-L182">source</a></section></details></article><h2 id="Households-actions"><a class="docs-heading-anchor" href="#Households-actions">Households actions</a><a id="Households-actions-1"></a><a class="docs-heading-anchor-permalink" href="#Households-actions" title="Permalink"></a></h2><h2 id="Government-actions"><a class="docs-heading-anchor" href="#Government-actions">Government actions</a><a id="Government-actions-1"></a><a class="docs-heading-anchor-permalink" href="#Government-actions" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="BeforeIT.Government-Tuple{Any, Any}"><a class="docstring-binding" href="#BeforeIT.Government-Tuple{Any, Any}"><code>BeforeIT.Government</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Government(parameters, initial_conditions)</code></pre><p>Initialize the government agent.</p><p><strong>Arguments</strong></p><ul><li><code>parameters</code>: The parameters.</li><li><code>initial_conditions</code>: The initial conditions.</li></ul><p><strong>Returns</strong></p><ul><li>The initialized government model.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/model_init/init_government.jl#L1-L12">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.gov_expenditure-Tuple{Any}"><a class="docstring-binding" href="#BeforeIT.gov_expenditure-Tuple{Any}"><code>BeforeIT.gov_expenditure</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">gov_expenditure(model)</code></pre><p>Computes government expenditure on consumption and transfers to households.</p><p><strong>Returns</strong></p><ul><li><code>C_G</code>: government consumption</li><li><code>C_d_j</code>: local government consumptions</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/government.jl#L1-L9">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.gov_loans-Tuple{Any}"><a class="docstring-binding" href="#BeforeIT.gov_loans-Tuple{Any}"><code>BeforeIT.gov_loans</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">gov_loans(model)</code></pre><p>Computes government new government debt.</p><p><strong>Returns</strong></p><ul><li><code>L_G</code>: new government debt</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/government.jl#L82-L89">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.gov_revenues-Tuple{BeforeIT.AbstractModel}"><a class="docstring-binding" href="#BeforeIT.gov_revenues-Tuple{BeforeIT.AbstractModel}"><code>BeforeIT.gov_revenues</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">gov_revenues(model)</code></pre><p>Computes government revenues from taxes and social security contributions. The government collects taxes on labour income, capital income, value added, and corporate income. It also collects social security contributions from workers and firms. The government also collects taxes on consumption and capital formation. Finally, the government collects taxes on exports and imports.</p><p><strong>Returns</strong></p><ul><li><code>Y_G</code>: government revenues</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/government.jl#L28-L41">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.gov_social_benefits-Tuple{BeforeIT.AbstractModel}"><a class="docstring-binding" href="#BeforeIT.gov_social_benefits-Tuple{BeforeIT.AbstractModel}"><code>BeforeIT.gov_social_benefits</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">gov_social_benefits(model)</code></pre><p>Computes social benefits paid by the government households.</p><p><strong>Returns</strong></p><ul><li><code>sb_other</code>: social benefits for other households</li><li><code>sb_inact</code>: social benefits for inactive households</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/government.jl#L110-L118">source</a></section></details></article><h2 id="Bank-and-Central-Bank-actions"><a class="docs-heading-anchor" href="#Bank-and-Central-Bank-actions">Bank and Central Bank actions</a><a id="Bank-and-Central-Bank-actions-1"></a><a class="docs-heading-anchor-permalink" href="#Bank-and-Central-Bank-actions" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="BeforeIT.bank_deposits-Tuple{Any}"><a class="docstring-binding" href="#BeforeIT.bank_deposits-Tuple{Any}"><code>BeforeIT.bank_deposits</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">bank_deposits(model)</code></pre><p>Calculate the new deposits of a bank.</p><p><strong>Returns</strong></p><ul><li><code>D_k</code>: New deposits of the bank</li></ul><p>The new deposits <code>D_k</code> are calculated as the sum of the deposits of the active workers, the inactive workers, the firms, and the bank owner itself, plus the bank&#39;s equity, minus the loans of the firms.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/bank.jl#L147-L157">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.bank_equity-Tuple{Any}"><a class="docstring-binding" href="#BeforeIT.bank_equity-Tuple{Any}"><code>BeforeIT.bank_equity</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">bank_equity(model)</code></pre><p>Calculate the net profits of the bank.</p><p><strong>Returns</strong></p><ul><li><code>E_k</code>: The updated equity of the bank.</li></ul><p>The net profits <code>DE_k</code> are calculated as:</p><p class="math-container">\[DE_k = \Pi_k - \theta_{DIV} \cdot (1 - \tau_{FIRM}) \cdot \max(0, \Pi_k) - \tau_{FIRM} \cdot \max(0, \Pi_k)\]</p><p>and the equity <code>E_k</code> is updated as:</p><p class="math-container">\[E_k = E_k + DE_k\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/bank.jl#L42-L61">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.bank_expected_profits-Tuple{BeforeIT.AbstractModel}"><a class="docstring-binding" href="#BeforeIT.bank_expected_profits-Tuple{BeforeIT.AbstractModel}"><code>BeforeIT.bank_expected_profits</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">bank_expected_profits(model)</code></pre><p>Calculate the expected profits of a bank.</p><p><strong>Returns</strong></p><ul><li><code>E_Pi_k</code>: Expected profits of the bank</li></ul><p>The expected profits <code>E_Pi_k</code> are calculated as follows:</p><p class="math-container">\[E_{\Pi_k} = \Pi_k \cdot (1 + \pi_e) \cdot (1 + \gamma_e)\]</p><p>where</p><ul><li><code>Pi_k</code>: Past profits of the bank</li><li><code>pi_e</code>: Expected inflation rate</li><li><code>gamma_e</code>: Expected growth rate</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/bank.jl#L94-L113">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.bank_profits-Tuple{Any}"><a class="docstring-binding" href="#BeforeIT.bank_profits-Tuple{Any}"><code>BeforeIT.bank_profits</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">bank_profits(model)</code></pre><p>Calculate the total profits of the bank.</p><p><strong>Returns</strong></p><ul><li><code>Pi_k</code>: The total profits of the bank.</li></ul><p>The total profits <code>Pi_k</code> are calculated as:</p><p class="math-container">\[\Pi_k = r \cdot \sum_i(L_i + \max(0, -D_i)) + r \cdot \sum_h(\max(0, -D_h)) + r_{bar}
\cdot \max(0, D_k) - r_{bar} \cdot \sum_i(\max(0, D_i)) - r_{bar} \cdot
\sum_h(\max(0, D_h)) - r_{bar} \cdot \max(0, -D_k)\]</p><p>where</p><ul><li><code>L_i</code>: Array of loans provided by the bank</li><li><code>D_i</code>: Array of deposits from firms</li><li><code>D_h</code>: Array of deposits from households</li><li><code>D_k</code>: Residual and balancing item on the bank’s balance sheet</li><li><code>r_bar</code>: Base interest rate</li><li><code>r</code>: Interest rate set by the bank</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/bank.jl#L1-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.bank_rate-Tuple{BeforeIT.AbstractModel}"><a class="docstring-binding" href="#BeforeIT.bank_rate-Tuple{BeforeIT.AbstractModel}"><code>BeforeIT.bank_rate</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">bank_rate(model)</code></pre><p>Update the interest rate set by the bank.</p><p><strong>Returns</strong></p><ul><li><code>r</code>: The updated interest rate</li></ul><p class="math-container">\[r = \bar{r} + \mu\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/bank.jl#L73-L84">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.central_bank_equity-Tuple{Any}"><a class="docstring-binding" href="#BeforeIT.central_bank_equity-Tuple{Any}"><code>BeforeIT.central_bank_equity</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">central_bank_equity(model)</code></pre><p>Calculate the equity of the central bank.</p><p><strong>Returns</strong></p><ul><li><code>E_CB</code>: The equity of the central bank</li></ul><p>The equity <code>E_CB</code> is calculated as follows:</p><p class="math-container">\[E_{CB} = E_{CB} + \Pi_{CB}\]</p><p>where <code>\Pi_{CB}</code> are the profits of the central bank.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/central_bank.jl#L83-L98">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.central_bank_profits-Tuple{Any, Any}"><a class="docstring-binding" href="#BeforeIT.central_bank_profits-Tuple{Any, Any}"><code>BeforeIT.central_bank_profits</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">central_bank_profits(cb, model)</code></pre><p>Function to calculate the profits of a central bank.</p><p><strong>Returns</strong></p><ul><li><code>Pi_CB</code>: Profits of the central bank</li></ul><p>The profits <code>Pi_CB</code> are calculated as follows:</p><p class="math-container">\[\{Pi}_{CB} = r_{G} \cdot L_{G} - r_{bar} \cdot D_{k}\]</p><p>where</p><ul><li><code>r_bar</code>: The base interest rate</li><li><code>D_k</code>: Deposits from commercial banks</li><li><code>L_G</code>: Loans provided to the government</li><li><code>r_G</code>: Interest rate on government loans</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/central_bank.jl#L55-L76">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.central_bank_rate-Tuple{BeforeIT.AbstractModel}"><a class="docstring-binding" href="#BeforeIT.central_bank_rate-Tuple{BeforeIT.AbstractModel}"><code>BeforeIT.central_bank_rate</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">central_bank_rate(cb, model)</code></pre><p>Update the base interest rate set by the central bank according to the Taylor rule.</p><p><strong>Arguments</strong></p><ul><li><code>cb</code>: The central bank whose base interest rate is to be updated</li><li><code>model</code>: The model object</li></ul><p><strong>Returns</strong></p><ul><li><code>r_bar</code>: The updated base interest rate</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/central_bank.jl#L1-L12">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.finance_insolvent_firms!-Tuple{BeforeIT.AbstractModel}"><a class="docstring-binding" href="#BeforeIT.finance_insolvent_firms!-Tuple{BeforeIT.AbstractModel}"><code>BeforeIT.finance_insolvent_firms!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">finance_insolvent_firms!(model)</code></pre><p>Re-finance insolvent firms using bank equity.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/bank.jl#L123-L127">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.taylor_rule-Union{Tuple{T}, NTuple{8, T}} where T"><a class="docstring-binding" href="#BeforeIT.taylor_rule-Union{Tuple{T}, NTuple{8, T}} where T"><code>BeforeIT.taylor_rule</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">taylor_rule(rho, r_bar, r_star, pi_star, xi_pi, xi_gamma, gamma_EA, pi_EA)</code></pre><p>Calculate the interest rate according to the Taylor rule.</p><p><strong>Arguments</strong></p><ul><li><code>rho</code>: Parameter for gradual adjustment of the policy rate.</li><li><code>r_bar</code>: Nominal interest rate.</li><li><code>r_star</code>: Real equilibrium interest rate.</li><li><code>pi_star</code>: The target inflation rate.</li><li><code>xi_pi</code>: Weight the CB puts on inflation targeting.</li><li><code>xi_gamma</code>: Weight placed on economic growth.</li><li><code>gamma_EA</code>: The output growth rate.</li><li><code>pi_EA</code>: The inflation rate.</li></ul><p><strong>Returns</strong></p><ul><li><code>rate</code>: The calculated interest rate.</li></ul><p>The Taylor rule is given by the following equation:</p><p class="math-container">\[r_t = ρ * r_{t-1} + (1 - ρ) * (r^* + π^* + ξ_π * (π_t - π^*) + ξ_γ * γ_t)```\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/central_bank.jl#L26-L49">source</a></section></details></article><h2 id="Rest-Of-The-World-actions"><a class="docs-heading-anchor" href="#Rest-Of-The-World-actions">Rest Of The World actions</a><a id="Rest-Of-The-World-actions-1"></a><a class="docs-heading-anchor-permalink" href="#Rest-Of-The-World-actions" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="BeforeIT.rotw_deposits-Tuple{Any}"><a class="docstring-binding" href="#BeforeIT.rotw_deposits-Tuple{Any}"><code>BeforeIT.rotw_deposits</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">rotw_deposits(model)</code></pre><p>Calculate the deposits of the rest of the world.</p><p><strong>Returns</strong></p><ul><li><code>D_RoW</code>: The deposits of the rest of the world.</li></ul><p>The deposits <code>D_RoW</code> are calculated as follows:</p><p class="math-container">\[D_{RoW} = D_{RoW} + \left( \sum_{m} P_m \cdot Q_m \right) - (1 + \tau_{EXPORT}) \cdot C_l\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/rotw.jl#L42-L55">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.rotw_import_export-Tuple{Any}"><a class="docstring-binding" href="#BeforeIT.rotw_import_export-Tuple{Any}"><code>BeforeIT.rotw_import_export</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">rotw_import_export(model)</code></pre><p>Calculate the demand for exports and supply of imports of the rest of the world.</p><p><strong>Returns</strong></p><ul><li><code>C_E</code>: Total demand for exports.</li><li><code>Y_I</code>: Supply of imports (in real terms).</li><li><code>C_d_l</code>: TDemand for exports of specific product.</li><li><code>Y_m</code>: Supply of imports per sector.</li><li><code>P_m</code>: Price of imports per sector.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/agent_actions/rotw.jl#L1-L12">source</a></section></details></article><h2 id="Markets"><a class="docs-heading-anchor" href="#Markets">Markets</a><a id="Markets-1"></a><a class="docs-heading-anchor-permalink" href="#Markets" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="BeforeIT.search_and_matching_credit!-Tuple{BeforeIT.AbstractModel}"><a class="docstring-binding" href="#BeforeIT.search_and_matching_credit!-Tuple{BeforeIT.AbstractModel}"><code>BeforeIT.search_and_matching_credit!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">search_and_matching_credit!(firms::Firms, model)</code></pre><p>This function calculates the credit allocation for each firm in the given firms object.</p><p>Parameters:</p><ul><li>firms::Firms: The firms object.</li><li>model: The model object.</li></ul><p>Returns:</p><ul><li>DL_i: An array of credit allocations for each firm.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/markets/search_and_matching_credit.jl#L1-L12">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.search_and_matching_labour!-Tuple{BeforeIT.AbstractModel}"><a class="docstring-binding" href="#BeforeIT.search_and_matching_labour!-Tuple{BeforeIT.AbstractModel}"><code>BeforeIT.search_and_matching_labour!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">search_and_matching_labour!(firms::Firms, model)</code></pre><p>This function implements a labor search and matching algorithm. It takes in a <code>Firms</code> object and a <code>Model</code> object as  input. The <code>Firms</code> object contains information about the number of desired employees (<code>N_d_i</code>) and the current number  of employees (<code>N_i</code>) for each firm. The <code>model</code> object contains information about the current employment  status (<code>O_h</code>) of each worker.</p><p>The function performs the following steps:</p><ul><li>Calculates the vacancies (<code>V_i</code>) for each firm as the difference between desired and current employees.</li><li>Identifies employed workers and shuffles them randomly.</li><li>Fires workers from firms with negative vacancies to adjust the workforce.</li><li>Identifies unemployed workers and firms with positive vacancies.</li><li>Randomly matches unemployed workers to firms with vacancies until all vacancies are filled or there are no more unemployed workers.</li></ul><p>The function returns:</p><ul><li><code>N_i</code>: An updated array of the number of employed workers for each firm.</li><li><code>O_h</code>: An updated array where each element represents the firm a worker is employed with (0 if unemployed).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/markets/search_and_matching_labour.jl#L1-L19">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.perform_firms_market!-NTuple{15, Any}"><a class="docstring-binding" href="#BeforeIT.perform_firms_market!-NTuple{15, Any}"><code>BeforeIT.perform_firms_market!</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Perform the firms market exchange process</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/markets/search_and_matching.jl#L196-L198">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.perform_retail_market!-NTuple{32, Any}"><a class="docstring-binding" href="#BeforeIT.perform_retail_market!-NTuple{32, Any}"><code>BeforeIT.perform_retail_market!</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Perform the retail market exchange process</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/markets/search_and_matching.jl#L290-L292">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BeforeIT.search_and_matching!-Tuple{BeforeIT.AbstractModel}"><a class="docstring-binding" href="#BeforeIT.search_and_matching!-Tuple{BeforeIT.AbstractModel}"><code>BeforeIT.search_and_matching!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">search_and_matching!(model; parallel::Bool = false)</code></pre><p>This function performs a search and matching algorithm for firms and for retail markets. It takes in a model object  and an optional boolean argument for multi-threading. The function loops over all goods and performs the firms market  and retail market operations for each good. Finally, it updates the aggregate variables based on the results of markets.</p><p>This function updates the model in-place and does not return any value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bancaditalia/BeforeIT.jl/blob/ddbedd51cb9348847ee8cb3babcdba5781d2b7b5/src/markets/search_and_matching.jl#L1-L9">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="examples/prediction_pipeline.html">« Calibration</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.17.0 on <span class="colophon-date" title="Wednesday 25 February 2026 20:54">Wednesday 25 February 2026</span>. Using Julia version 1.10.10.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
